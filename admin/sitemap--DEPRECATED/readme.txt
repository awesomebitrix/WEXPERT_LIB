--
Пропатченный генератор карты сайта (sitemap.xml):
--

1. файлы из папки bitrix_admin кинуть в папку /bitrix/admin/

2. файлы из папки bitrix_php_interface_include_admin кинуть в папку /bitrix/php_interface/include/admin/

3. в сервисах появляется пункт "Дополнительно" / "пропатченный генератор карты сайта"

4. генерируем карту сайта из админы и смотрим на результат. Это важно! могут попасть лишние пункты меню, см. п.5

5. этот генератор работает на основе модуля поиска.
если нужно исключить какие-либо страницы, чтобы они не попадали в карту сайта sitemap.xml, то открываем файл:

/bitrix/php_interface/include/admin/search_sm.php

строка 148, массив масок-исключений.
/*
 *
 * маски с игнорируемыми путями
 *
 */
$arIgnoreRegS = array(
	'#/login/#is',
	'#/users/#is',
	'#/cat/_tests/#is',
	'#/cat/(.*?)\.php$#',
	'#/subscription/#',
	'#/finance/#',
);
